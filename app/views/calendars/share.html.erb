<h1>Preview and get widget code</h1>
<P>Choose your prefered widget dimensions:</p>
<div id="choose_style">
<% ["tiny", "small", "normal"].each do |style|  %>
    <label for="preview_type_<%=style%>"><%= style %></label>
    <input type="radio" name="preview_type" value="tiny" id="preview_type_<%=style%>" onchange="change_style(this);"/>
<% end %>
</div>
      <p> Tiny= 200 pixels wide, Small= 300 pixels wide, Normal= 600 pixels wide</P>

<textarea id="preview_html" rows="8" cols="50">
</textarea>
<P>Copy and paste the html code above any where in between your &lt; BODY &gt; tags in your html page.</P>     
<p><span class="headtextlighter">What your widget looks like</span></p>
<div id="preview_guide"></div>

<div id="preview_template" class="hidden">
  &lt;script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="<%=WEB_ROOT%>/public.js" &gt;&lt;/script&gt;
  &lt;div id="preview_guide"&gt; &lt;/div&gt;
  &lt;script type="text/javascript"&gt;
      _cal.render_calendar("{target_id}", "{calendar_id}", "{style_id}");
  &lt;/script&gt;
</div>

<script type="text/javascript">
    var change_pane = function(id) {
        $('.preview_area').hide();
        $('#' + id + '_area').show();
    };
    var change_style = function(el) {
        var target_id = "preview_guide";
        var calendar_id = "<%= @calendar.id %>";
        var style_id = el.id.substring("preview_type_".length);

        // prepare code to show
        var html = $('#preview_template').html();
        html = html.replace("{target_id}", target_id);
        html = html.replace("{calendar_id}", calendar_id);
        html = html.replace("{style_id}", style_id);
        html = html.replace(/&lt;/g, '<');
        html = html.replace(/&gt;/g, '>');
        $('#preview_html').val(html);

        _cal.render_calendar(target_id, calendar_id, style_id);
    };

    $('#choose_style').buttonset();
</script>
